<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Training - Pathways</title>
    <style>
        /* Layout styles preserved */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            min-height: 100vh;
            overflow-x: hidden;
        }
        header {
            background-color: #4caf50;
            color: white;
            width: 100%;
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        header h1 {
            margin: 0;
        }
        header h2 {
            font-size: 1.2rem;
            margin-top: 10px;
            color: white;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 700px;
            width: 90%;
            text-align: center;
            position: relative;
        }
        h2, h3 {
            color: #4caf50;
            margin-bottom: 10px;
        }
        input[type="text"], textarea {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        textarea {
            height: 120px;
        }
        button {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
            margin: 20px 0;
        }
        table, th, td {
            border: 1px solid #ccc;
        }
        th, td {
            padding: 10px;
            text-align: center;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        .arrow {
            cursor: pointer;
            font-size: 20px;
            position: absolute;
            top: 10px;
            background: none;
            border: none;
            color: #4caf50;
            display: flex;
            align-items: center;
        }
        .arrow.left {
            left: 10px;
        }
        .arrow.right {
            right: 10px;
        }
        .hidden {
            display: none;
        }
        footer {
            margin-top: 20px;
            font-size: 0.9rem;
            text-align: center;
            color: #777;
        }
        .alert {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
        }
        .alert button {
            background-color: red;
            color: white;
            padding: 10px;
            margin: 5px;
        }
        .alert button.confirm {
            background-color: green;
        }
        .correct {
            background-color: lightgreen;
        }
        .late {
            background-color: red;
            color: white;
        }

        /* New Media Query for phone formats */
        @media (max-width: 600px) {
            header h1 {
                font-size: 1.5rem; /* Smaller font size for title on small screens */
            }
            header h2 {
                font-size: 1rem; /* Smaller subtitle font size */
            }
            .container {
                width: 95%; /* More space on smaller screens */
                padding: 15px; /* Adjust padding for better space utilization */
            }
            input[type="text"], textarea {
                width: 100%; /* Make inputs take full width on mobile */
                padding: 12px; /* Slightly larger padding for inputs */
                font-size: 1rem; /* Make font size larger for easier input */
            }
            button {
                width: 100%; /* Make buttons full-width on mobile */
                font-size: 1.2rem; /* Increase font size for better readability */
                padding: 15px; /* More padding for better touch targets */
            }
            table th, table td {
                font-size: 0.9rem; /* Smaller font size in table for better fit */
                padding: 8px; /* Smaller padding in table */
            }
            .arrow {
                font-size: 18px; /* Slightly smaller arrows */
            }
            footer p {
                font-size: 0.8rem; /* Smaller footer text */
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>PATHWAYS REGIONAL EMPLOYMENT SUPPORT SERVICES</h1>
        <h2>Clock-In/Clock-Out & Feedback Training</h2>
    </header>

    <!-- Clock-In / Clock-Out Page -->
    <div id="clockInPage" class="container">
        <h2>Clock In / Out</h2>
        <p>Insert your name below:</p>
        <input type="text" id="nameInput" placeholder="Enter your name">
        <div>
            <button onclick="clockIn()">Clock In</button>
            <button onclick="clockOut()">Clock Out</button>
        </div>
        <p id="message"></p>
        <div id="tableContainer">
            <h3>Clock-In/Out Reports</h3>
            <input type="text" id="clockInSearch" placeholder="Search by Name" oninput="searchClockIn()">
            <table id="reportTable">
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Actions</th>
                </tr>
            </table>
        </div>
        <button class="arrow left" onclick="showRank()">← Rank</button> 
        <button class="arrow right" onclick="showNotes()">Notes →</button> 
    </div>

    <!-- Ranking Page -->
    <div id="rankPage" class="container hidden">
        <h3>Rankings</h3>
        <input type="text" id="rankSearch" placeholder="Search by Name" oninput="searchRank()">
        <table id="rankTable">
            <tr>
                <th>Name</th>
                <th>Correct Clock-Ins</th>
                <th>Total Clock-Ins</th>
                <th>Late Clock-Ins</th>
            </tr>
        </table>
        <button class="arrow left" onclick="showClockIn()">← Clock-In/Clock-Out</button>
    </div>

    <!-- Notes Page -->
    <div id="notesPage" class="container hidden">
        <h3>Notes</h3>
        <input type="text" id="noteNameInput" placeholder="Enter your name">
        <textarea id="noteInput" placeholder="Write your note here..."></textarea>
        <p>Rate your day:</p>
        <input type="number" id="rating" min="1" max="5" placeholder="1-5">
        <p>Enter your Job Coach's name:</p>
        <input type="text" id="jobCoachInput" placeholder="Job Coach's name">
        <button onclick="addNote()">Submit Note</button>
        <input type="text" id="noteSearch" placeholder="Search by Name" oninput="searchNotes()">
        <table id="notesTable">
            <tr>
                <th>Name</th>
                <th>Note</th>
                <th>Rating</th>
                <th>Job Coach</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </table>
        <button class="arrow left" onclick="showClockIn()">← Clock-In/Clock-Out</button>
    </div>

    <footer>
        <p>&copy; 2025 Pathways Regional Employment Support Services. All Rights Reserved.</p>
    </footer>

    <!-- Deletion Alert -->
    <div id="deleteAlert" class="alert">
        <p>This action cannot be reversed. You are encouraged to communicate with your assigned Job Coach before proceeding.</p>
        <button class="confirm" onclick="deleteConfirmed()">Yes, Proceed</button>
        <button onclick="cancelDelete()">No, Cancel</button>
    </div>

    <script>
        // Storage Keys
        const STORAGE_KEYS = {
            CLOCK_IN_REPORTS: 'clockInReports',
            CLOCKED_IN_NAMES: 'clockedInNames',
            NOTES: 'notes',
        };

        let clockInReports = [];
        let clockedInNames = new Set();
        let notes = [];
        let deleteIndex = -1;
        let deleteType = "";

        document.addEventListener('DOMContentLoaded', initializeData);

        // Motivational phrases
        const motivationalPhrases = [
            "Great job! Keep it up!",
            "You're doing amazing!",
            "Every step forward is progress.",
            "Keep pushing – you're closer than you think!",
            "Success is built on effort. Keep going!",
            "You're making a difference!",
            "Consistency is key – great work!",
            "You're one step closer to your goal!",
            "Keep your head up – you're doing great!",
            "Believe in yourself – you're doing awesome!",
            "Amazing progress – keep it up!",
            "The best time to start is now – you’re doing it!",
            "Great effort, keep striving!",
            "Your dedication is inspiring!",
            "You're on the right path – keep going!",
            "Stay positive – you're doing wonderful!",
            "You're getting better every day!",
            "Hard work pays off – keep it up!",
            "Every effort counts – keep up the great work!",
            "You’re stronger than you think – keep it going!",
            "Your effort is appreciated – keep it up!",
            "Keep up the momentum – you’re doing great!",
            "You’ve got this – don’t stop now!",
            "The future looks bright with your effort!",
            "One more step – you’re doing fantastic!",
            "Every challenge you overcome makes you stronger!",
            "Keep grinding, the results are coming!",
            "You are your best asset – keep going!",
            "Great things are ahead, keep going!"
        ];

        function initializeData() {
            clockInReports = JSON.parse(localStorage.getItem(STORAGE_KEYS.CLOCK_IN_REPORTS)) || [];
            clockedInNames = new Set(JSON.parse(localStorage.getItem(STORAGE_KEYS.CLOCKED_IN_NAMES)) || []);
            notes = JSON.parse(localStorage.getItem(STORAGE_KEYS.NOTES)) || [];
            loadClockInData();
            loadRankings();
            loadNotes();
        }

        function saveData() {
            localStorage.setItem(STORAGE_KEYS.CLOCK_IN_REPORTS, JSON.stringify(clockInReports));
            localStorage.setItem(STORAGE_KEYS.CLOCKED_IN_NAMES, JSON.stringify(Array.from(clockedInNames)));
            localStorage.setItem(STORAGE_KEYS.NOTES, JSON.stringify(notes));
        }

        function clockIn() {
            const name = document.getElementById('nameInput').value.trim();
            if (!name) {
                document.getElementById('message').textContent = 'Please enter a valid name.';
                return;
            }
            const currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
            const currentDate = new Date().toLocaleDateString();
            clockInReports.push({ name, type: 'In', time: currentTime, date: currentDate });
            clockedInNames.add(name);
            saveData();
            loadClockInData();
            loadRankings();

            // Display motivational phrase when clocking in
            const randomPhrase = motivationalPhrases[Math.floor(Math.random() * motivationalPhrases.length)];
            document.getElementById('message').textContent = `${name} clocked in successfully at ${currentTime}. ${randomPhrase}`;
        }

        function clockOut() {
            const name = document.getElementById('nameInput').value.trim();
            if (!name) {
                document.getElementById('message').textContent = 'Please enter a valid name.';
                return;
            }
            const currentTime = new Date().toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
            const currentDate = new Date().toLocaleDateString();
            clockInReports.push({ name, type: 'Out', time: currentTime, date: currentDate });
            clockedInNames.delete(name);
            saveData();
            loadClockInData();
            loadRankings();

            // Display motivational phrase when clocking out
            const randomPhrase = motivationalPhrases[Math.floor(Math.random() * motivationalPhrases.length)];
            document.getElementById('message').textContent = `${name} clocked out successfully at ${currentTime}. ${randomPhrase}`;
        }

        function isCorrectTime(time) {
            const correctTimes = ['8:00 AM', '10:40 AM', '10:55 AM', '12:00 PM', '1:00 PM', '2:00 PM'];
            return correctTimes.includes(time);
        }

        function loadClockInData() {
            const table = document.getElementById('reportTable');
            table.innerHTML = `
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Actions</th>
                </tr>
            `;
            clockInReports.forEach((report, index) => {
                const row = table.insertRow();
                const isCorrect = isCorrectTime(report.time);
                const className = isCorrect ? 'correct' : 'late';
                row.className = className;

                row.innerHTML = `
                    <td>${report.name}</td>
                    <td>${report.type}</td>
                    <td>${report.date}</td>
                    <td>${report.time}</td>
                    <td><button onclick="eraseReport(${index})">Erase</button></td>
                `;
            });
        }

        function eraseReport(index) {
            deleteIndex = index;
            deleteType = 'clockIn';
            document.getElementById('deleteAlert').style.display = 'block';
        }

        function deleteConfirmed() {
            if (deleteType === 'clockIn') {
                clockInReports.splice(deleteIndex, 1);
                saveData();
                loadClockInData();
                loadRankings();
            } else if (deleteType === 'note') {
                notes.splice(deleteIndex, 1);
                saveData();
                loadNotes();
            }
            document.getElementById('deleteAlert').style.display = 'none';
        }

        function cancelDelete() {
            document.getElementById('deleteAlert').style.display = 'none';
        }

        function loadRankings() {
            const rankings = {};
            clockInReports.forEach(report => {
                if (!rankings[report.name]) {
                    rankings[report.name] = { correct: 0, total: 0, late: 0 };
                }

                rankings[report.name].total++;

                if (isCorrectTime(report.time)) {
                    rankings[report.name].correct++;
                } else {
                    rankings[report.name].late++;
                }
            });

            const rankTable = document.getElementById('rankTable');
            rankTable.innerHTML = `
                <tr>
                    <th>Name</th>
                    <th>Correct Clock-Ins</th>
                    <th>Total Clock-Ins</th>
                    <th>Late Clock-Ins</th>
                </tr>
            `;
            for (const name in rankings) {
                const { correct, total, late } = rankings[name];
                const row = rankTable.insertRow();
                row.innerHTML = `
                    <td>${name}</td>
                    <td>${correct}</td>
                    <td>${total}</td>
                    <td>${late}</td>
                `;
            }
        }

        function loadNotes() {
            const table = document.getElementById('notesTable');
            table.innerHTML = `
                <tr>
                    <th>Name</th>
                    <th>Note</th>
                    <th>Rating</th>
                    <th>Job Coach</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
            `;
            notes.forEach((note, index) => {
                const row = table.insertRow();
                row.innerHTML = `
                    <td>${note.name}</td>
                    <td>${note.note}</td>
                    <td>${note.rating}</td>
                    <td>${note.jobCoach}</td>
                    <td>${note.date}</td>
                    <td><button onclick="eraseNote(${index})">Erase</button></td>
                `;
            });
        }

        function addNote() {
            const name = document.getElementById('noteNameInput').value.trim();
            const note = document.getElementById('noteInput').value.trim();
            const rating = document.getElementById('rating').value;
            const jobCoach = document.getElementById('jobCoachInput').value.trim();

            if (!name || !note || !rating || !jobCoach) {
                alert('Please fill in all fields');
                return;
            }

            const currentDate = new Date().toLocaleDateString();
            notes.push({ name, note, rating, jobCoach, date: currentDate });
            saveData();
            loadNotes();
            alert('Note submitted!');
        }

        function eraseNote(index) {
            deleteIndex = index;
            deleteType = 'note';
            document.getElementById('deleteAlert').style.display = 'block';
        }

        function searchClockIn() {
            const query = document.getElementById('clockInSearch').value.toLowerCase();
            const rows = document.getElementById('reportTable').rows;
            for (let i = 1; i < rows.length; i++) {
                const name = rows[i].cells[0].textContent.toLowerCase();
                if (name.includes(query)) {
                    rows[i].style.display = '';
                } else {
                    rows[i].style.display = 'none';
                }
            }
        }

        function searchRank() {
            const query = document.getElementById('rankSearch').value.toLowerCase();
            const rows = document.getElementById('rankTable').rows;
            for (let i = 1; i < rows.length; i++) {
                const name = rows[i].cells[0].textContent.toLowerCase();
                if (name.includes(query)) {
                    rows[i].style.display = '';
                } else {
                    rows[i].style.display = 'none';
                }
            }
        }

        function searchNotes() {
            const query = document.getElementById('noteSearch').value.toLowerCase();
            const rows = document.getElementById('notesTable').rows;
            for (let i = 1; i < rows.length; i++) {
                const name = rows[i].cells[0].textContent.toLowerCase();
                if (name.includes(query)) {
                    rows[i].style.display = '';
                } else {
                    rows[i].style.display = 'none';
                }
            }
        }

        function showRank() {
            document.getElementById('clockInPage').classList.add('hidden');
            document.getElementById('rankPage').classList.remove('hidden');
        }

        function showNotes() {
            document.getElementById('clockInPage').classList.add('hidden');
            document.getElementById('notesPage').classList.remove('hidden');
        }

        function showClockIn() {
            document.getElementById('rankPage').classList.add('hidden');
            document.getElementById('notesPage').classList.add('hidden');
            document.getElementById('clockInPage').classList.remove('hidden');
        }
    </script>
</body>
</html>
